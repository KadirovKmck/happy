<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Happy Birthday — Single Page with Music & Cake</title>

  <!-- Beautiful handwritten font -->
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet" />

  <style>
    /* Reset basics */
    * {
      margin: 0; padding: 0;
      box-sizing: border-box;
    }
    html, body {
      width: 100%; height: 100%;
      overflow: hidden; /* no scrollbars */
      font-family: sans-serif;
    }

    /* Both screens are absolutely positioned and fill the viewport */
    .screen {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      display: none; /* hidden by default */
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    /* ---------- Screen 1 (Hearts animation) ---------- */
    .screen1 {
      display: flex; /* show screen1 by default */
      background: linear-gradient(135deg, #000, #3c0000, #000);
      background-size: 400% 400%;
      animation: bg-flow 14s ease-in-out infinite;
      color: #fff;
    }
    @keyframes bg-flow {
      0%, 100% { background-position: 0% 50%; }
      50%      { background-position: 100% 50%; }
    }

    /* Canvas with hearts behind text */
    #heartCanvasWrapper {
      position: absolute;
      z-index: 0;
      top: 0; left: 0;
      width: 100%; height: 100%;
    }
    #c {
      width: 100%; height: 100%;
      display: block;
    }

    /* Text & button in screen1 */
    .screen1-content {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: fadeIn 2s ease forwards;
      opacity: 0;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }
    h1.title {
      font-family: 'Dancing Script', cursive;
      font-size: 3rem;
      margin-bottom: 0.5em;
      text-shadow: 0 0 10px #ff99aa;
    }
    .greeting {
      font-family: 'Dancing Script', cursive;
      font-size: 1.5rem;
      margin-bottom: 1.5em;
      text-shadow: 0 0 8px #ff99aa;
      text-align: center;
      max-width: 90%;
    }
    .music-button {
      font-size: 1rem;
      padding: 0.7em 1.2em;
      background: #ff88a0; color: #fff;
      border: none; cursor: pointer;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transition: transform 0.2s;
    }
    .music-button:hover {
      transform: scale(1.05);
    }

    /* ---------- Screen 2 (Birthday-cake animation) ---------- */
    .screen2 {
      background: #ee9ca7;
      /* flex layout for center */
      display: flex; 
    }

    .cake {
      background: #ffffff;
      border-radius: 10px;
      position: absolute;
      top: 228px;
      left: 50%;
      margin-left: -2.4px;
      margin-top: -8.33333333px;
      width: 5px;
      height: 35px;
      transform: translateY(-300px);
      backface-visibility: hidden;
      animation: in 500ms 6s ease-out forwards;
    }
    .cake:after,
    .cake:before {
      background: rgba(255, 0, 0, 0.4);
      content: "";
      position: absolute;
      width: 100%;
      height: 2.22222222px;
    }
    .cake:after { top: 25%; left: 0; }
    .cake:before { top: 45%; left: 0; }

    .fuego {
      border-radius: 100%;
      position: absolute;
      top: -20px;
      left: 50%;
      margin-left: -2.6px;
      width: 6.66666667px;
      height: 18px;
    }
    .fuego:nth-child(1) {
      animation: fuego 2s 6.5s infinite;
    }
    .fuego:nth-child(2) {
      animation: fuego 1.5s 6.5s infinite;
    }
    .fuego:nth-child(3) {
      animation: fuego 1s 6.5s infinite;
    }
    .fuego:nth-child(4) {
      animation: fuego 0.5s 6.5s infinite;
    }
    .fuego:nth-child(5) {
      animation: fuego 0.2s 6.5s infinite;
    }

    @keyframes fuego {
      0%, 100% {
        background: rgba(254, 248, 97, 0.5);
        box-shadow: 0 0 40px 10px rgba(248, 233, 209, 0.2);
        transform: translateY(0) scale(1);
      }
      50% {
        background: rgba(255, 50, 0, 0.1);
        box-shadow: 0 0 40px 20px rgba(248, 233, 209, 0.2);
        transform: translateY(-20px) scale(0);
      }
    }
    @keyframes in { to { transform: translateY(0); } }

    .text-cake {
      color: #8b6a60;
      font-family: 'Lato', sans-serif;
      font-weight: 300;
      font-style: italic;
      text-align: center;
      margin-top: 200px; /* so it doesn't overlap the candle */
    }
    .text-cake h1 {
      font-size: 1.4em;
      margin-bottom: 0.3em;
    }
    .name {
      font-size: 1.1rem;
      font-weight: 600;
    }

    /* We'll keep the SVG at a certain size */
    #cakeSVG {
      width: 200px; height: 500px;
    }

    /* Minimal fade in for screen2 */
    .screen2-content {
      animation: fadeInScreen2 1.5s ease forwards;
      opacity: 0;
    }
    @keyframes fadeInScreen2 {
      to { opacity: 1; }
    }

    /* Hide the iframe initially (1x1 px, out of viewport).
       We only create it once user clicks the button. */
    #musicIframe {
      position: absolute;
      width: 1px; height: 1px;
      left: -9999px; top: -9999px;
    }
  </style>
</head>
<body>

  <!-- =============== SCREEN 1: HEART ANIMATION + TEXT + MUSIC BUTTON =============== -->
  <div class="screen screen1" id="screen1">
    <!-- Canvas in background for hearts -->
    <div id="heartCanvasWrapper">
      <canvas id="c"></canvas>
    </div>

    <!-- Text + button in front -->
    <div class="screen1-content">
      <h1 class="title">С Днём Рождения, Одина!</h1>
      <div class="greeting">
        Пусть этот день принесёт тебе много радости, улыбок и вдохновения!
      </div>
      <button class="music-button" onclick="playMusic()">Включить музыку</button>
    </div>
  </div>

  <!-- =============== SCREEN 2: BIRTHDAY CAKE ANIMATION =============== -->
  <div class="screen screen2" id="screen2">
    <!-- Candle flame elements -->
    <div class="cake">
      <div class="fuego"></div>
      <div class="fuego"></div>
      <div class="fuego"></div>
      <div class="fuego"></div>
      <div class="fuego"></div>
    </div>
    <!-- The cake SVG -->
    <svg id="cakeSVG" x="0px" y="0px" viewBox="0 0 200 500">
      <!-- Insert all your paths and animations from birthday-cake.html here -->
      <path fill="#a88679" d="M173.667-13.94c-49.298,0-102.782,0-147.334,0c-3.999,0-4-16.002,0-16.002
         ..."></path>
      <!-- keep adding the rest of your <path> and <animate> if needed -->
    </svg>

    <div class="text-cake screen2-content">
      <h1>happy birthday!</h1>
      <p class="name">Odina</p>
    </div>
  </div>

  <script>
    /* ========== HEART ANIMATION ON SCREEN 1 ========== */
    var c = document.getElementById('c');
    var a = c.getContext('2d');

    c.width = innerWidth;
    c.height = innerHeight;

    var e = [];  // trails
    var h = [];  // heart path
    var O = c.width;
    var Q = c.height;

    var v = 32; 
    var M = Math;
    var R = M.random;
    var C = M.cos;
    var Y = 6.3;

    // Create heart curve coords
    for (var i = 0; i < Y; i += 0.2) {
      h.push([
        O/2 + 180 * M.pow(M.sin(i), 3),
        Q/2 + 10 * (-(15*C(i) - 5*C(2*i) - 2*C(3*i) - C(4*i)))
      ]);
    }

    // Generate wormy lines
    var i = 0;
    while (i < v) {
      var x = R() * O;
      var y = R() * Q;

      var H = i/v * 80 + 280;
      var S = R() * 40 + 60;
      var B = R() * 60 + 20;

      var f = [];

      var k = 0;
      while (k < v) {
        f[k++] = {
          x: x,
          y: y,
          X: 0, Y: 0,
          R: (1 - k/v) + 1,
          S: (R() * 2) + 1.5,     // faster
          q: ~~(R() * v),
          D: i % 2 * 2 - 1,
          F: (R() * 0.15) + 0.65, // lower friction
          f: "hsla(" + ~~H + "," + ~~S + "%," + ~~B + "%,0.1)"
        };
      }
      e[i++] = f;
    }

    function renderDot(dot) {
      a.fillStyle = dot.f;
      a.beginPath();
      a.arc(dot.x, dot.y, dot.R, 0, Y, true);
      a.closePath();
      a.fill();
    }

    function loop() {
      a.fillStyle = "rgba(0,0,0,0.2)";
      a.fillRect(0, 0, O, Q);

      var i = v;
      while (i--) {
        var f = e[i];
        var u = f[0];
        var q = h[u.q];
        var D = u.x - q[0];
        var E = u.y - q[1];
        var G = M.sqrt(D*D + E*E);

        if (G < 10) {
          if (R() > 0.95) {
            u.q = ~~(R() * v);
          } else {
            if (R() > 0.99) u.D *= -1;
            u.q += u.D;
            u.q %= v;
            if (u.q < 0) u.q += v;
          }
        }

        u.X += -D / G * u.S;
        u.Y += -E / G * u.S;
        u.x += u.X;
        u.y += u.Y;
        renderDot(u);

        u.X *= u.F;
        u.Y *= u.F;

        var k = 0;
        while (k < v - 1) {
          var T = f[k];
          var N = f[++k];
          N.x -= (N.x - T.x) * 0.7;
          N.y -= (N.y - T.y) * 0.7;
          renderDot(N);
        }
      }
    }

    // Start the animation loop
    (function animate() {
      requestAnimationFrame(animate);
      loop();
    })();


    /* ========== SWITCH SCREENS AFTER 6s ========== */
    setTimeout(function() {
      // Hide screen1, show screen2
      document.getElementById('screen1').style.display = 'none';
      document.getElementById('screen2').style.display = 'flex';
    }, 6000);

    /* ========== MUSIC (YouTube) ========== */
    function playMusic() {
      // If we already created the iframe, do nothing
      if (document.getElementById('musicIframe')) return;

      // Create the hidden iframe
      var iframe = document.createElement('iframe');
      iframe.id = 'musicIframe';
      iframe.src = "https://www.youtube.com/embed/iislwy5AIjw?autoplay=1&loop=1&playlist=iislwy5AIjw&controls=0&mute=0";
      iframe.allow = "autoplay; encrypted-media";
      iframe.frameBorder = "0";

      // Hide the iframe so it doesn't show on the page
      iframe.style.width = '1px';
      iframe.style.height = '1px';
      iframe.style.position = 'absolute';
      iframe.style.left = '-9999px';
      iframe.style.top = '-9999px';

      // Append to body => it should start playing IF user just clicked
      document.body.appendChild(iframe);
    }
  </script>
</body>
</html>