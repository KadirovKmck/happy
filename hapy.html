
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>С Днём Рождения, Одина + Музыка!</title>

  <!-- Подключаем красивый рукописный шрифт -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

  <style>
    /* ... те же стили, что и у тебя, я их сокращу ... */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; overflow: hidden; }
    body {
      background: linear-gradient(135deg, #000, #3c0000, #000);
      background-size: 400% 400%;
      animation: bg-flow 14s ease-in-out infinite;
      display: flex; justify-content: center; align-items: center;
      color: #fff; font-family: sans-serif; text-align: center;
      position: relative; font-size: 3em; scrollbar-width: none;
    }
    @keyframes bg-flow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    #obal { position: absolute; z-index: 0; top: 0; left: 0; width: 100%; height: 100%; }
    canvas { display: block; width: 100%; height: 100%; }

    .centered-text {
      position: relative; z-index: 1; display: flex;
      flex-direction: column; align-items: center; justify-content: center;
      animation: fadeInContainer 1.5s ease forwards; opacity: 0;
    }
    @keyframes fadeInContainer { to { opacity: 1; } }

    h1 {
      font-family: 'Dancing Script', cursive;
      font-size: 4rem; margin-bottom: 1rem;
      text-shadow: 0 0 10px #ff99aa; opacity: 0;
      animation: fadeInDown 2.5s ease forwards; animation-delay: 1s;
    }
    @keyframes fadeInDown {
      0%   { opacity: 0; transform: translateY(-50px); }
      100% { opacity: 1; transform: translateY(0);      }
    }
    h2.greeting {
      font-family: 'Dancing Script', cursive;
      font-size: 2rem; color: #fff; text-shadow: 0 0 8px #ff99aa;
      opacity: 0; animation: fadeInUp 2.5s ease forwards;
      animation-delay: 2.5s;
    }
    @keyframes fadeInUp {
      0%   { opacity: 0; transform: translateY(50px); }
      100% { opacity: 1; transform: translateY(0);    }
    }

    /* Кнопка для включения музыки */
    .music-button {
      margin-top: 1rem;
      font-size: 0.5em; /* т.к. body=3em => 0.5em=1.5rem */
      padding: 0.5em 1em;
      background: #ff88a0; color: #fff; border: none;
      cursor: pointer; border-radius: 8px;
      text-shadow: 0 0 4px rgba(0,0,0,0.3);
      transition: transform 0.2s;
    }
    .music-button:hover {
      transform: scale(1.1);
    }

  </style>
</head>
<body>
  <!-- Canvas (сердце) -->
  <div id="obal">
    <canvas id="c"></canvas>
  </div>

  <!-- Текст -->
  <div class="centered-text">
    <h1>С Днём Рождения, Одина!</h1>
    <h2 class="greeting">Пусть этот день принесёт тебе много радости и улыбок!</h2>

    <!-- Кнопка «Включить музыку» -->
    <button class="music-button" onclick="playMusic()">Включить музыку</button>
  </div>

  <!-- Скрипт анимации сердца -->
  <script>
    var c = document.getElementById('c');
    var a = c.getContext('2d');

    c.width = innerWidth;
    c.height = innerHeight;

    var e = [];  // trails
    var h = [];  // heart path
    var O = c.width;
    var Q = c.height;

    var v = 32; 
    var M = Math;
    var R = M.random;
    var C = M.cos;
    var Y = 6.3;

    // HeartCurve
    for (var i = 0; i < Y; i += 0.2) {
      h.push([
        O / 2 + 180 * M.pow(M.sin(i), 3),
        Q / 2 + 10 * (-(15*C(i) - 5*C(2*i) - 2*C(3*i) - C(4*i)))
      ]);
    }

    var i = 0;
    while (i < v) {
      var x = R() * O;
      var y = R() * Q;

      var H = i / v * 80 + 280;
      var S = R() * 40 + 60;
      var B = R() * 60 + 20;

      var f = [];

      var k = 0;
      while (k < v) {
        f[k++] = {
          x: x,
          y: y,
          X: 0,
          Y: 0,
          R: (1 - k/v) + 1,
          S: (R() * 2) + 1.5,   
          q: ~~(R() * v),
          D: i % 2 * 2 - 1,
          F: (R() * 0.15) + 0.65,
          f: "hsla(" + ~~H + "," + ~~S + "%," + ~~B + "%,0.1)"
        };
      }
      e[i++] = f;
    }

    function renderDot(dot) {
      a.fillStyle = dot.f;
      a.beginPath();
      a.arc(dot.x, dot.y, dot.R, 0, Y, true);
      a.closePath();
      a.fill();
    }

    function loop() {
      a.fillStyle = "rgba(0,0,0,0.2)";
      a.fillRect(0, 0, O, Q);

      var i = v;
      while (i--) {
        var f = e[i];
        var u = f[0];
        var q = h[u.q];
        var D = u.x - q[0];
        var E = u.y - q[1];
        var G = M.sqrt(D*D + E*E);

        if (G < 10) {
          if (R() > 0.95) {
            u.q = ~~(R() * v);
          } else {
            if (R() > 0.99) u.D *= -1;
            u.q += u.D;
            u.q %= v;
            if (u.q < 0) u.q += v;
          }
        }

        u.X += -D / G * u.S;
        u.Y += -E / G * u.S;
        u.x += u.X;
        u.y += u.Y;
        renderDot(u);

        u.X *= u.F;
        u.Y *= u.F;

        var k = 0;
        while (k < v-1) {
          var T = f[k];
          var N = f[++k];
          N.x -= (N.x - T.x) * 0.7;
          N.y -= (N.y - T.y) * 0.7;
          renderDot(N);
        }
      }
    }

    (function animate() {
      requestAnimationFrame(animate);
      loop();
    })();

    // Функция, которая создаёт iframe при клике
    function playMusic() {
      // Если уже создали iframe — дальше не делаем
      if (document.getElementById('musicIframe')) return;

      // Создаём iframe YouTube динамически
      var iframe = document.createElement('iframe');
      iframe.id = 'musicIframe';
      iframe.className = 'music';
      // Параметры: autoplay=1, loop=1, playlist=iislwy5AIjw, controls=0, mute=0
      iframe.src = "https://www.youtube.com/embed/iislwy5AIjw?autoplay=1&loop=1&playlist=iislwy5AIjw&controls=0&mute=0";
      iframe.frameBorder = "0";
      iframe.allow = "autoplay; encrypted-media";
      iframe.style.width = '1px';
      iframe.style.height = '1px';
      iframe.style.position = 'absolute';
      iframe.style.left = '-9999px';
      iframe.style.top = '-9999px';

      document.body.appendChild(iframe);
    }
  </script>

  <script>
    setTimeout(function() {
      window.location.href = 'birthday-cake.html';
    }, 6000);
  </script>

</body>
</html>